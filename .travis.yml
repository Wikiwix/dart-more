language: dart
dart: dev

jobs:
  include:
  - stage: analyze
    script: dartanalyzer --fatal-warnings .
  - stage: analyze
    script: dartfmt --dry-run --set-exit-if-changed .
  - stage: build
    script: pub run build_runner build test
  - stage: test
    script: pub run build_runner test -- --platform vm
  - stage: test
    script: pub run build_runner test -- --platform chrome
stages:
- analyze
- build
- test

sudo: required
cache:
  directories:
  - $HOME/.pub-cache
  - .dart_tool/build
